<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사내복지기금 신청 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: 'Malgun Gothic', sans-serif; }
        .container { max-width: 700px; margin-top: 50px; margin-bottom: 50px; }
        .card { border: none; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .card-header { background-color: #004a99; color: white; border-radius: 20px 20px 0 0 !important; padding: 25px; }
        .btn-primary { background-color: #004a99; border: none; padding: 12px; border-radius: 10px; font-weight: bold; }
        .btn-primary:hover { background-color: #003366; }
        .form-label { font-weight: 600; color: #333; }
        .form-control, .form-select { border-radius: 8px; padding: 12px; border: 1px solid #ddd; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <div class="card-header text-center">
            <h3 class="mb-1">사내복지기금 신청서</h3>
            <p class="mb-0" style="font-size: 0.9rem; opacity: 0.8;">한국지방재정공제회 인프라팀</p>
        </div>
        <div class="card-body p-4">
            <form id="applicationForm">
                
                <div class="mb-4">
                    <h5 class="text-primary mb-3">| 신청인 정보</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="employeeName" class="form-label">성명</label>
                            <input type="text" class="form-control" name="employeeName" id="employeeName" placeholder="예: 윤정환" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="employeeId" class="form-label">사번</label>
                            <input type="text" class="form-control" name="employeeId" id="employeeId" placeholder="사번 입력" required>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <h5 class="text-primary mb-3">| 신청 내역</h5>
                    <div class="mb-3">
                        <label for="benefitType" class="form-label">복지 항목</label>
                        <select class="form-select" name="benefitType" id="benefitType" required>
                            <option value="" selected disabled>항목을 선택해 주세요</option>
                            <option value="복지연금">복지연금 지원</option>
                            <option value="상조서비스">상조서비스(10구좌 등) 지원</option>
                            <option value="의료비">의료비 지원</option>
                            <option value="자기계발">자기계발비</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="amount" class="form-label">신청 금액 (원)</label>
                        <input type="number" class="form-control" name="amount" id="amount" placeholder="숫자만 입력 (예: 1000000)">
                    </div>
                    <div class="mb-3">
                        <label for="reason" class="form-label">신청 사유</label>
                        <textarea class="form-control" name="reason" id="reason" rows="3" placeholder="상세 사유를 입력하세요"></textarea>
                    </div>
                </div>

                <hr class="my-4">

                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary btn-lg">신청서 제출하기</button>
                    <button type="reset" class="btn btn-light text-secondary">내용 초기화</button>
                </div>

            </form>
        </div>
    </div>
    <p class="text-center mt-4 text-muted" style="font-size: 0.8rem;">
        본 시스템은 인프라팀 내부 업무용으로 운영됩니다.
    </p>
</div>

<script>
    document.getElementById('applicationForm').addEventListener('submit', function(e) {
        e.preventDefault(); // 페이지 새로고침 방지
        
        // 입력된 데이터를 수집
        const formData = new FormData(this);

        // 파이썬 서버의 /submit 경로로 데이터 전송
        fetch('/submit', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if(data.status === 'success') {
                alert('정상적으로 접수되었습니다!\n엑셀 파일을 확인해 보세요.');
                this.reset(); // 양식 비우기
            } else {
                alert('오류가 발생했습니다: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('서버와 통신할 수 없습니다. 파이썬 서버가 켜져 있는지 확인하세요.');
        });
    });
</script>

</body>
</html>
